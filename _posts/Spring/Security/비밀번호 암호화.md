---
aliases:
  - 비밀번호 암호화
  - PasswordEncoder
  - BCryptPasswordEncoder
  - SCryptPasswordEncoder
  - Argon2PasswordEncoder
tags:
  - Spring
  - Spring/Security
특징: 비밀번호 암호화
---
# 비밀번호 암호화
## PasswordEncoder 
비밀번호를 보호하는 방법
- 아무런 조치를 취하지 않는 방법(추천하지 않음)
- 인코딩 방법(추천하지 않음)
	-  [[2.Ref(데이터 및 정보 저장)/개발 이론/ascii|ASCII]] 인코딩 방법
	- BASE64
	- UNICODE
- 암호화 방법(추천하지 않음)
- 해싱 방법(추천 방법)

확인 방법
1. 비밀번호를 특정 방법으로 변경
2. DB에 저장
3. 로그인할때 들어오는 비밀번호를 특정 방법으로 동일하게 변경
4. 만들어진 값과 DB에 저장된 값을 비교
```java
public interface PasswordEncoder {
	// 인코드 진행
	String encode(CharSequence rawPassword);

	// 같은 비밀번호인지 확인 (맞는지 확인하는 비번, 인코드된 비번) 같지 않다면 false
	boolean matches(CharSequence rawPassword, String encodedPassword);

	// 인코딩된 비밀번호를 확인하여 더 보안을 해야할 경우 true, 보안이 충분하다면 false
	default boolean upgradeEncoding(String encodedPassword) {
		return false;
	}
}
```
### NoOpPasswordEncoder
<span style="background:#ff4d4f">안전하지 않음</span>
평문으로 저장된 비밀번호 비교
테스트용으로 사용하기 좋음
### StandardPasswordEncoder
<span style="background:#ff4d4f">안전하지 않음</span>
무작위 Sault 값을 사용해 SHA-256 해싱 알고리즘을 구현
추가적인 보호를 제공하기 위해 시스템 전체 비밀 값을 사용
아무리 봐도 해시 방식인데 암호화 인코더 방식이라네
### Pbkdf2PasswordEncoder
<span style="background:#ff4d4f">안전하지 않음</span>
5~6년 전쯤에는 이 방식을 안전하게 인식 했었음
암호화 인코더 방식
### BCryptPasswordEncoder
<span style="background:#40a9ff">추천</span>
Bcrypt 해싱 방법은 매번 다른 해시 문자열 값을 반환하지만 해시값은 동일하다 판단
해당 해싱 방법을 뚫기 위해선 그에 맞는 연산 능력이 필요
해싱을 하게 되면 `$2a$10$` 문자열이 붙는데 `$2a` 의 의미는 `BCrypt` 를 사용 했다는 의미이고 a는 `BCrypt`의 버전을 의미 `$10`는 해싱에 사용된 `cost factor`를 의미 (복잡성의 수치를 나타냄 높을수록 어려움)

```java
@Bean  
public PasswordEncoder passwordEncoder() {  
  return new BCryptPasswordEncoder(BCryptPasswordEncoder.BCryptVersion.$2B, 10);  
}
```
> 기본적으로 별다른 옵션을 지정하지 않는게 기본
### SCryptPasswordEncoder
<span style="background:#40a9ff">추천</span>
BCryptPasswordEncoder의 고급 버전
해당 해싱 방법을 뚫기 위해선 BCryptPasswordEncoder의 연산 능력과 본인 RAM 내부 메모리를 할당
### Argon2PasswordEncoder
<span style="background:#40a9ff">추천</span>
최신의 해싱 알고리즘
해당 해싱 방법을 뚫기 위해선 연산 능력과 RAM 내부 메모리 할당과 다중 스레드 지원을 해야함