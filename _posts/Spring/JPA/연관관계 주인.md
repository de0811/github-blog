---
aliases:
  - ì—°ê´€ê´€ê³„ ì£¼ì¸
tags:
  - Spring
  - Spring/JPA
  - spring/Repository
íŠ¹ì§•: "@ManyToOneì´ ì ìš©ëœ ê³³"
---
# ì—°ê´€ê´€ê³„ ì£¼ì¸
- `FK`ëˆ„ê°€ ê°€ì§€ê³  ê´€ë¦¬í•˜ê³  ìˆëŠ”ì§€ì— ëŒ€í•œ ê²ƒ
- **ì™¸ë˜ í‚¤(FK)ë¥¼ ê´€ë¦¬í•˜ëŠ” [[2.Ref(ë°ì´í„° ë° ì •ë³´ ì €ì¥)/Spring/ìš©ì–´ì„¤ëª…/Entity|ì—”í‹°í‹°]] ** (ì¦‰, [[2.Ref(ë°ì´í„° ë° ì •ë³´ ì €ì¥)/Spring/Annotation/@ManyToOne|@ManyToOne]] ì´ ì ìš©ëœ ê³³)
	- `FK`ë¥¼ ê´€ë¦¬í•˜ëŠ” ê³³ì€ [[2.Ref(ë°ì´í„° ë° ì •ë³´ ì €ì¥)/Spring/Annotation/@OneToMany|@OneToMany]] ë¥¼ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œëŠ” ìê¸°ìì‹ ì˜ `PK`ë¥¼ `FK`ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì£¼ì¸ì´ ë  ìˆ˜ ì—†ìŒ, [[2.Ref(ë°ì´í„° ë° ì •ë³´ ì €ì¥)/Spring/Annotation/@ManyToOne|@ManyToOne]] ì‚¬ìš©í•˜ëŠ” ê³³ì´ ì£¼ì¸
	- ê²°ë¡  : **ì™¸ë˜í‚¤(`FK`)ê°€ ìˆëŠ” ê³³ì´ ì£¼ì¸**
- ì–‘ë°©í–¥ì¼ë•Œë§Œ ì‚¬ìš©í•˜ëŠ” ê°œë…
- ì—°ê´€ê´€ê³„ ì£¼ì¸ì€ ë“±ë¡, ìˆ˜ì • ë“±ì˜ ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥
- ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ ì•„ë‹Œ(`mappedBy`) ê²½ìš° ì½ê¸°ë§Œ ê°€ëŠ¥
## ğŸ“Œ ì™¸ë˜í‚¤(FK)ê°€ ìˆëŠ” ê³³ì´ ì—°ê´€ê´€ê³„ ì£¼ì¸ì¸ ì´ìœ 
```plantuml
@startuml
title ê°ì²´ ì—°ê´€ê´€ê³„ & í…Œì´ë¸” ì—°ê´€ê´€ê³„

' ê°ì²´ ì—°ê´€ê´€ê³„
package "ê°ì²´ ì—°ê´€ê´€ê³„ ë§¤í•‘" {
	class Member {
	    id
	    Team team
	    username
	}

	class Team {
	    id
	    name
	}

	Member }o--|| Team : "* : 1"
}

' í…Œì´ë¸” ì—°ê´€ê´€ê³„
package "í…Œì´ë¸” ì—°ê´€ê´€ê³„ ë§¤í•‘" {
    class MEMBER {
        MEMBER_ID (PK)
        TEAM_ID (FK)
        USERNAME
    }

    class TEAM {
        TEAM_ID (PK)
        NAME
    }

    MEMBER }o--|| TEAM : "FK ê´€ê³„"
}
@enduml
```
- í…Œì´ë¸” ì—°ê´€ê´€ê³„ë¥¼ ë³´ë©´ `FK`ë¥¼ í†µí•´ ê´€ê³„ë¥¼ ì—°ê²°í•˜ëŠ” ê²ƒì„ í™•ì¸
```SQL title:"FK ì´ìš©í•˜ì—¬ ì–‘ë°©í–¥ìœ¼ë¡œ ì‘ì„± ê°€ëŠ¥ í™•ì¸"
SELECT *
FROM MEMBER M
JOIN TEAM T ON M.TEAM_ID = T.TEAM_ID

SELECT *
FROM TEAM T
JOIN MEMBER M ON T.TEAM_ID = M.TEAM_ID
```
>`MEMBER` í…Œì´ë¸”ì˜ `TEAM_ID`ê°€ `TEAM` í…Œì´ë¸”ì˜ `TEAM_ID`ë¥¼ ì°¸ì¡°í•˜ê¸° ë•Œë¬¸ì— Â ë‘ í…Œì´ë¸”ì„ **JOIN**í•˜ì—¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ.
## ğŸš¨ ì£¼ì˜ì‚¬í•­
- ì£¼ì¸ì€ `mappedBy` ì†ì„±ì„ ì‚¬ìš©í•´ì„œëŠ” ì•ˆë¨
- ì£¼ì¸ì´ ì•„ë‹ˆë©´ `mappedBy`  ì†ì„±ìœ¼ë¡œ ì£¼ì¸ ì§€ì •
- ê°’ì„ ì„¸íŒ…í• ë• ì£¼ì¸ì— ê°’ë§Œ ì„¸íŒ…ì„ í•´ë„ ë˜ì§€ë§Œ [[2.Ref(ë°ì´í„° ë° ì •ë³´ ì €ì¥)/Spring/JPA/Persistence|ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸]] ì— ë“±ë¡ë˜ì§€ ì•Šì•˜ì„ë•Œë¥¼ ëŒ€ë¹„í•˜ì—¬ ì–‘ì¸¡ì— ëª¨ë‘ ê°’ì„ ì €ì¥í•˜ëŠ” ê²ƒì´ í•©ë¦¬ì 
## ğŸ›  ì‚¬ìš© ì˜ˆì œ
```java title:"ERD í†µí•˜ì—¬ ì‘ì„±ëœ Entity"
@Entity
public class Team {
  @Id @GeneratedValue
  private Long id;
  private String name;
  @OneToMany(mappedBy = "team")
  private List<Member> members = new ArrayList<>();
}

@Entity
public class Member {
  @Id
  @GeneratedValue
  @Column(name = "MEMBER_ID")
  private Long id;
  private String name;
  @ManyToOne
  @JoinColumn(name = "TEAM_ID")
  private Team team;
}
```