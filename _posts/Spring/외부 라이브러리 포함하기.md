---
aliases:
  - 외부 라이브러리 포함하기
tags:
  - Spring
  - Spring/Configration
  - Gradle
  - index
특징:
isPublic: true
---
# 외부 라이브러리 포함하기
- `Maven Central` 등 원격 저장소에 없는 사내 라이브러리나 레거시 `JAR` 파일을 프로젝트에 포함시키는 방법
- `Maven` 적는걸 잊어버림
	- 귀찮으니 나중에 시간내서 다시 적어야지
## 🚨 장단점 및 주의사항
* **장점**
    * 사내 Maven Repository에 종속되지 않아 개발 환경 구성이 자유로움
    * 중앙 저장소의 변경에 끌려다니지 않고 프로젝트별 독립성 유지 가능
* **단점 및 주의사항**
    * **의존성 전이 불가**: 로컬 JAR이 의존하는 다른 라이브러리는 직접 명시해야 함
    * **수동 버전 관리**: 버전 변경 시 JAR 파일을 직접 교체해야 하므로 번거롭고 실수가 발생할 수 있음
### 💡라이브러리가 필요할 경우
- 라이브러리로 필요할 경우 `Nexus`, `Artifactory` 같은 **`사내 Maven Repository(Private Repository)`를 구축** 하거나 `GitHub Packages`같은 기능을 사용하는 방법 밖에 없음
  보통 Maven Repository 를 구축하는 것을 추천
- 취향차이 또는 회사 환경차이기는 하지만 사내 환경에 종속적이지 않은게 더 맞다고 생각
	- 사내 망에 연결하는 것이 외부(집)에서 작업하기 힘든 환경일 경우 이 방법을 쓰면 일 하기에도 시키기 너무 좋음(나 포함)
### 💡 해결책: 코드만 필요할 경우 Git Submodule을 이용한 버전 관리
==이렇게 생각은 했는데 사실 난 아직 안써봄 아마 되지 않을까? 될껄? 이 회사는 이렇게까지 쓸 일이 없었는걸?==
- [[2.Ref(데이터 및 정보 저장)/GIT/Git Submodule|Git Submodule]]을 사용하면, 소스 코드를 직접 포함하면서도 **특정 버전을 명시**할 수 있어 위 단점을 해결 가능
- 핵심은 라이브러리 프로젝트(Submodule)에서 **Git Tag**로 버전을 명시하는 것
#### 1.라이브러리 저장소에서 버전 태그(Tag) 생성
- 라이브러리 프로젝트(예: B Repository)에서 버전 릴리즈 시점에 맞춰 태그를 생성하고 push
```bash title:"메인 프로젝트에서 사용할 서브 프로젝트에서 태그 설정"
# B Repository에서 실행
git tag -a v1.1.0 -m "Release version 1.1.0"
git push origin v1.1.0
```
#### 2.메인 프로젝트에서 Submodule 업데이트
- 메인 프로젝트(예: A Project)에서 Submodule을 원하는 버전 태그로 업데이트하고, 이 변경사항을 커밋
```bash title:"메인 프로젝트에서 서브 프로젝트 받기"
# A Project에서 실행

# 1. Submodule 폴더로 이동
cd <submodule-path>

# 2. 최신 변경사항과 태그 가져오기
git fetch --tags

# 3. 원하는 버전(태그)으로 체크아웃
git checkout v1.1.0

# 4. 상위 프로젝트로 이동하여 변경된 Submodule 커밋
cd ..
git add <submodule-path>
git commit -m "Update library to v1.1.0"
```
이 방식을 사용하면, 팀원들은 `git clone --recurse-submodules` 명령어로 프로젝트를 복제할 때 항상 **고정된 `v1.1.0` 버전의 라이브러리**를 받게 됨

## build.gradle 설정
1. 프로젝트 최상위에 `libs` 폴더 생성
```
my-project/
├── libs/
│   └── custom-library-v1.jar
├── build.gradle
└── src/
```
### 특정 파일만 지정
- `build.gradle` jar 내용 추가하기
```gradle
dependencies {
    implementation files('libs/custom-library-v1.jar')
}
```
### 폴더 내 모든 JAR 파일 포함
```gradle
dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
}
```
