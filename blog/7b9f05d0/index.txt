1:"$Sreact.fragment"
2:I[7913,["874","static/chunks/874-2a9a337f20b19b4a.js","177","static/chunks/app/layout-650164235edda1d2.js"],"default"]
3:I[7555,[],""]
4:I[1295,[],""]
6:I[9665,[],"MetadataBoundary"]
8:I[9665,[],"OutletBoundary"]
b:I[4911,[],"AsyncMetadataOutlet"]
d:I[9665,[],"ViewportBoundary"]
f:I[6614,[],""]
:HL["/github-blog/_next/static/css/a8e036e7bd01ae38.css","style"]
:HL["/github-blog/_next/static/css/0d98168a1605ff50.css","style"]
0:{"P":null,"b":"OYEOA4qImn1SvUYX3qist","p":"/github-blog","c":["","blog","7b9f05d0",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slugHash","7b9f05d0","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/github-blog/_next/static/css/a8e036e7bd01ae38.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"kr","children":["$","body",null,{"children":[["$","$L2",null,{}],["$","main",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slugHash","7b9f05d0","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",["$","$L6",null,{"children":"$L7"}],[["$","link","0",{"rel":"stylesheet","href":"/github-blog/_next/static/css/0d98168a1605ff50.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L8",null,{"children":["$L9","$La",["$","$Lb",null,{"promise":"$@c"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","_EgG0B1HeM8FlZHWbb3qR",{"children":[["$","$Ld",null,{"children":"$Le"}],null]}],null]}],false]],"m":"$undefined","G":["$f","$undefined"],"s":false,"S":true}
10:"$Sreact.suspense"
11:I[4911,[],"AsyncMetadata"]
7:["$","$10",null,{"fallback":null,"children":["$","$L11",null,{"promise":"$@12"}]}]
a:null
13:I[6704,["63","static/chunks/63-c4a44d636d6b867b.js","727","static/chunks/727-27da60f8cc92f67b.js","401","static/chunks/app/blog/%5BslugHash%5D/page-0270bde2035ebc34.js"],"default"]
14:T48e1,<h1 style="color: #82AAFF;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h1</span>
                  CORS(Cross Origin Resource Sharing)
                </h1>
<p><code>Access-Control-Allow-Origin</code><br>서로 다른 URL 일 경우에 브라우저는 서로간의 통신을 차단<br>프론트와 백엔드가 서로 다른 URL 다르기 때문에 서로 대화를 하는 것을 최신 브라우저는 차단<br>해당 기능은 브라우저에서 차단하는 기능이기 때문에 API 형태로 작동하는 백엔드의 경우 사용에 의미가 없음</p>

<div class="callout" style="--callout-color: 41, 128, 185;">
  <div class="callout-title">
    <div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-4V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" /></svg></div>
    <div class="callout-title-text">서로 다른 조건 3가지</div>
  </div>
  <div class="callout-content">
    <ul>
<li>Protocol 인 HTTP 또는 HTTPS 가 다른 경우</li>
<li>domain 이름이 다를 경우</li>
<li>port 번호가 다를 경우</li>
</ul>

  </div>
</div>
<p>브라우저들은 대부분 pre-flight(교차출처소통?) 요청을 하기 때문에 백엔드에서만 해줘도 문제 없음</p>
<p><img src="/github-blog/images/AttachedFile/Pasted%20image%2020240328151205.png" alt="Pasted image 20240328151205.png" style=""><br>최신 브라우저들에서는 기본적으로 가지고 있는 CORS 기능으로 인한 에러 발생</p>
<h2 style="color: #C3E88D;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h2</span>
                  해결 방법 1
                </h2>
<p><a href="/github-blog/blog/bc8e25e2">@CrossOrigin</a> 사용하는 방법<br>어디와 소통하는데 허용하겠다는 의미</p>
<h2 style="color: #C3E88D;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h2</span>
                  해결 방법 2
                </h2>
<p><a href="#"></a>  설정을 작성하는 방법<br>필수 설정</p>
<ul>
<li>허용 Method 설정</li>
<li>허용 Origin 설정</li>
<li>허용 Headers 설정<br>3가지 중 하나라도 없을 경우 CORS 해지되지 않음</li>
</ul>
<h1 style="color: #82AAFF;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h1</span>
                  CorsConfiguration
                </h1>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><title>Java</title><path d="M 28.1875 0 C 30.9375 6.363281 18.328125 10.292969 17.15625 15.59375 C 16.082031 20.464844 24.648438 26.125 24.65625 26.125 C 23.355469 24.109375 22.398438 22.449219 21.09375 19.3125 C 18.886719 14.007813 34.535156 9.207031 28.1875 0 Z M 36.5625 8.8125 C 36.5625 8.8125 25.5 9.523438 24.9375 16.59375 C 24.6875 19.742188 27.847656 21.398438 27.9375 23.6875 C 28.011719 25.558594 26.0625 27.125 26.0625 27.125 C 26.0625 27.125 29.609375 26.449219 30.71875 23.59375 C 31.949219 20.425781 28.320313 18.285156 28.6875 15.75 C 29.039063 13.324219 36.5625 8.8125 36.5625 8.8125 Z M 19.1875 25.15625 C 19.1875 25.15625 9.0625 25.011719 9.0625 27.875 C 9.0625 30.867188 22.316406 31.089844 31.78125 29.25 C 31.78125 29.25 34.296875 27.519531 34.96875 26.875 C 28.765625 28.140625 14.625 28.28125 14.625 27.1875 C 14.625 26.179688 19.1875 25.15625 19.1875 25.15625 Z M 38.65625 25.15625 C 37.664063 25.234375 36.59375 25.617188 35.625 26.3125 C 37.90625 25.820313 39.84375 27.234375 39.84375 28.84375 C 39.84375 32.46875 34.59375 35.875 34.59375 35.875 C 34.59375 35.875 42.71875 34.953125 42.71875 29 C 42.71875 26.296875 40.839844 24.984375 38.65625 25.15625 Z M 16.75 30.71875 C 15.195313 30.71875 12.875 31.9375 12.875 33.09375 C 12.875 35.417969 24.5625 37.207031 33.21875 33.8125 L 30.21875 31.96875 C 24.351563 33.847656 13.546875 33.234375 16.75 30.71875 Z M 18.1875 35.9375 C 16.058594 35.9375 14.65625 37.222656 14.65625 38.1875 C 14.65625 41.171875 27.371094 41.472656 32.40625 38.4375 L 29.21875 36.40625 C 25.457031 37.996094 16.015625 38.238281 18.1875 35.9375 Z M 11.09375 38.625 C 7.625 38.554688 5.375 40.113281 5.375 41.40625 C 5.375 48.28125 40.875 47.964844 40.875 40.9375 C 40.875 39.769531 39.527344 39.203125 39.03125 38.9375 C 41.933594 45.65625 9.96875 45.121094 9.96875 41.15625 C 9.96875 40.253906 12.320313 39.390625 14.5 39.8125 L 12.65625 38.75 C 12.113281 38.667969 11.589844 38.636719 11.09375 38.625 Z M 44.625 43.25 C 39.226563 48.367188 25.546875 50.222656 11.78125 47.0625 C 25.542969 52.695313 44.558594 49.535156 44.625 43.25 Z"/></svg></span>
              <span class="custom-code-block-lang-text">java</span>
            </div>
            
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-java hljs"><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CorsConfiguration</span> {</span><span class="line">	<span class="hljs-comment">// 교차 출처 요청이 허용되는 출처 목록 List.of(&quot;http://localhost:3000&quot;) 이렇게 넣기도 하지만 &quot;${origin}&quot; 이렇게 넣는게 더 쓰기 좋음</span></span><span class="line">	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAllowedOrigins</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> List&lt;String&gt; origins)</span></span><span class="line">	<span class="hljs-comment">// 해당 방법은 setAllowedOrigins 처럼 ${origin} 방법을 사용하지 못하고 문자열 그대로 저장</span></span><span class="line">	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addAllowedMethod</span><span class="hljs-params">(String method)</span></span><span class="line">	<span class="hljs-comment">// 인증정보를 넘기고 받는데 동의할지 말지 선택 (이거 굳이 필요하나?)</span></span><span class="line">	<span class="hljs-comment">// 내 서버가 응답할 때 json을 자바스크립트에서 처리할 수 있게 할지를 설정하는 것 (json 오는 데이터를 처리할지 선택)</span></span><span class="line">	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAllowCredentials</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Boolean allowCredentials)</span></span><span class="line">}</span></code></pre>
        </div>
      
<h2 style="color: #C3E88D;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h2</span>
                  사용 예제
                </h2>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><title>Java</title><path d="M 28.1875 0 C 30.9375 6.363281 18.328125 10.292969 17.15625 15.59375 C 16.082031 20.464844 24.648438 26.125 24.65625 26.125 C 23.355469 24.109375 22.398438 22.449219 21.09375 19.3125 C 18.886719 14.007813 34.535156 9.207031 28.1875 0 Z M 36.5625 8.8125 C 36.5625 8.8125 25.5 9.523438 24.9375 16.59375 C 24.6875 19.742188 27.847656 21.398438 27.9375 23.6875 C 28.011719 25.558594 26.0625 27.125 26.0625 27.125 C 26.0625 27.125 29.609375 26.449219 30.71875 23.59375 C 31.949219 20.425781 28.320313 18.285156 28.6875 15.75 C 29.039063 13.324219 36.5625 8.8125 36.5625 8.8125 Z M 19.1875 25.15625 C 19.1875 25.15625 9.0625 25.011719 9.0625 27.875 C 9.0625 30.867188 22.316406 31.089844 31.78125 29.25 C 31.78125 29.25 34.296875 27.519531 34.96875 26.875 C 28.765625 28.140625 14.625 28.28125 14.625 27.1875 C 14.625 26.179688 19.1875 25.15625 19.1875 25.15625 Z M 38.65625 25.15625 C 37.664063 25.234375 36.59375 25.617188 35.625 26.3125 C 37.90625 25.820313 39.84375 27.234375 39.84375 28.84375 C 39.84375 32.46875 34.59375 35.875 34.59375 35.875 C 34.59375 35.875 42.71875 34.953125 42.71875 29 C 42.71875 26.296875 40.839844 24.984375 38.65625 25.15625 Z M 16.75 30.71875 C 15.195313 30.71875 12.875 31.9375 12.875 33.09375 C 12.875 35.417969 24.5625 37.207031 33.21875 33.8125 L 30.21875 31.96875 C 24.351563 33.847656 13.546875 33.234375 16.75 30.71875 Z M 18.1875 35.9375 C 16.058594 35.9375 14.65625 37.222656 14.65625 38.1875 C 14.65625 41.171875 27.371094 41.472656 32.40625 38.4375 L 29.21875 36.40625 C 25.457031 37.996094 16.015625 38.238281 18.1875 35.9375 Z M 11.09375 38.625 C 7.625 38.554688 5.375 40.113281 5.375 41.40625 C 5.375 48.28125 40.875 47.964844 40.875 40.9375 C 40.875 39.769531 39.527344 39.203125 39.03125 38.9375 C 41.933594 45.65625 9.96875 45.121094 9.96875 41.15625 C 9.96875 40.253906 12.320313 39.390625 14.5 39.8125 L 12.65625 38.75 C 12.113281 38.667969 11.589844 38.636719 11.09375 38.625 Z M 44.625 43.25 C 39.226563 48.367188 25.546875 50.222656 11.78125 47.0625 C 25.542969 52.695313 44.558594 49.535156 44.625 43.25 Z"/></svg></span>
              <span class="custom-code-block-lang-text">java</span>
            </div>
            
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-java hljs"><span class="line">  <span class="hljs-keyword">public</span> CorsConfiguration <span class="hljs-title function_">corsConfiguration</span><span class="hljs-params">()</span> {  </span><span class="line">    <span class="hljs-type">CorsConfiguration</span> <span class="hljs-variable">corsConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CorsConfiguration</span>();  </span><span class="line"><span class="hljs-comment">//    corsConfig.addAllowedOrigin(&quot;http://localhost:3000&quot;);  </span></span><span class="line">    corsConfig.setAllowedOrigins(List.of(<span class="hljs-string">&quot;http://localhost:3000&quot;</span>));  </span><span class="line">    corsConfig.addAllowedMethod(<span class="hljs-string">&quot;*&quot;</span>);  </span><span class="line">    corsConfig.addAllowedHeader(<span class="hljs-string">&quot;*&quot;</span>);  </span><span class="line">    corsConfig.setMaxAge(<span class="hljs-number">3600L</span>);  </span><span class="line">    <span class="hljs-keyword">return</span> corsConfig;  </span><span class="line">  }</span></code></pre>
        </div>
      

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><title>Java</title><path d="M 28.1875 0 C 30.9375 6.363281 18.328125 10.292969 17.15625 15.59375 C 16.082031 20.464844 24.648438 26.125 24.65625 26.125 C 23.355469 24.109375 22.398438 22.449219 21.09375 19.3125 C 18.886719 14.007813 34.535156 9.207031 28.1875 0 Z M 36.5625 8.8125 C 36.5625 8.8125 25.5 9.523438 24.9375 16.59375 C 24.6875 19.742188 27.847656 21.398438 27.9375 23.6875 C 28.011719 25.558594 26.0625 27.125 26.0625 27.125 C 26.0625 27.125 29.609375 26.449219 30.71875 23.59375 C 31.949219 20.425781 28.320313 18.285156 28.6875 15.75 C 29.039063 13.324219 36.5625 8.8125 36.5625 8.8125 Z M 19.1875 25.15625 C 19.1875 25.15625 9.0625 25.011719 9.0625 27.875 C 9.0625 30.867188 22.316406 31.089844 31.78125 29.25 C 31.78125 29.25 34.296875 27.519531 34.96875 26.875 C 28.765625 28.140625 14.625 28.28125 14.625 27.1875 C 14.625 26.179688 19.1875 25.15625 19.1875 25.15625 Z M 38.65625 25.15625 C 37.664063 25.234375 36.59375 25.617188 35.625 26.3125 C 37.90625 25.820313 39.84375 27.234375 39.84375 28.84375 C 39.84375 32.46875 34.59375 35.875 34.59375 35.875 C 34.59375 35.875 42.71875 34.953125 42.71875 29 C 42.71875 26.296875 40.839844 24.984375 38.65625 25.15625 Z M 16.75 30.71875 C 15.195313 30.71875 12.875 31.9375 12.875 33.09375 C 12.875 35.417969 24.5625 37.207031 33.21875 33.8125 L 30.21875 31.96875 C 24.351563 33.847656 13.546875 33.234375 16.75 30.71875 Z M 18.1875 35.9375 C 16.058594 35.9375 14.65625 37.222656 14.65625 38.1875 C 14.65625 41.171875 27.371094 41.472656 32.40625 38.4375 L 29.21875 36.40625 C 25.457031 37.996094 16.015625 38.238281 18.1875 35.9375 Z M 11.09375 38.625 C 7.625 38.554688 5.375 40.113281 5.375 41.40625 C 5.375 48.28125 40.875 47.964844 40.875 40.9375 C 40.875 39.769531 39.527344 39.203125 39.03125 38.9375 C 41.933594 45.65625 9.96875 45.121094 9.96875 41.15625 C 9.96875 40.253906 12.320313 39.390625 14.5 39.8125 L 12.65625 38.75 C 12.113281 38.667969 11.589844 38.636719 11.09375 38.625 Z M 44.625 43.25 C 39.226563 48.367188 25.546875 50.222656 11.78125 47.0625 C 25.542969 52.695313 44.558594 49.535156 44.625 43.25 Z"/></svg></span>
              <span class="custom-code-block-lang-text">java</span>
            </div>
            
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-java hljs"><span class="line"><span class="hljs-meta">@Configuration</span>  </span><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CorsConfig</span> {  </span><span class="line">    XsConfig xsConfig;  </span><span class="line">  </span><span class="line">    <span class="hljs-meta">@Autowired</span>  </span><span class="line">    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CorsConfig</span><span class="hljs-params">(  </span><span class="line">            XsConfig xsConfig  </span><span class="line">    )</span>{  </span><span class="line">        <span class="hljs-built_in">this</span>.xsConfig = xsConfig;  </span><span class="line">    }  </span><span class="line">    <span class="hljs-meta">@Bean</span>  </span><span class="line">    <span class="hljs-keyword">public</span> CorsFilter <span class="hljs-title function_">corsFilter</span><span class="hljs-params">()</span>{  </span><span class="line">        <span class="hljs-type">UrlBasedCorsConfigurationSource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlBasedCorsConfigurationSource</span>();  </span><span class="line">        <span class="hljs-type">CorsConfiguration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CorsConfiguration</span>();  </span><span class="line"><span class="hljs-comment">//        configuration.addAllowedOrigin(&quot;*&quot;); //모든 ip에 응답을 허용(이제 막힘)</span></span><span class="line">        configuration.addAllowedOrigin(xsConfig.getConsoleFrontUrl());  </span><span class="line">        configuration.setAllowCredentials(<span class="hljs-literal">true</span>); <span class="hljs-comment">// 내 서버가 응답할 때 json을 자바스크립트에서 처리할 수 있게 할지를 설정하는 것 (json 오는 데이터를 처리할지 선택)  </span></span><span class="line">        configuration.addAllowedHeader(<span class="hljs-string">&quot;*&quot;</span>); <span class="hljs-comment">//모든 header 응답을 허용  </span></span><span class="line"><span class="hljs-comment">//        configuration.addAllowedMethod(&quot;*&quot;); //모든 post, get, put, delete, patch 허용  </span></span><span class="line">        configuration.addAllowedMethod(HttpMethod.GET);  </span><span class="line">        configuration.addAllowedMethod(HttpMethod.POST);  </span><span class="line">        configuration.addExposedHeader(<span class="hljs-string">&quot;Authorization&quot;</span>);  </span><span class="line">        source.registerCorsConfiguration(<span class="hljs-string">&quot;/**&quot;</span>, configuration); <span class="hljs-comment">//해당 패턴으로 오는 모든 내용은 해당 configuration을 적용  </span></span><span class="line">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CorsFilter</span>(source);  </span><span class="line">    }  </span><span class="line">}</span></code></pre>
        </div>
      
15:Tf5a,---
aliases:
  - CORS
  - CorsConfiguration
tags:
  - Spring
  - Spring/Security
특징: CORS 관련 설명
---
# CORS(Cross Origin Resource Sharing)
`Access-Control-Allow-Origin`
서로 다른 URL 일 경우에 브라우저는 서로간의 통신을 차단
프론트와 백엔드가 서로 다른 URL 다르기 때문에 서로 대화를 하는 것을 최신 브라우저는 차단
해당 기능은 브라우저에서 차단하는 기능이기 때문에 API 형태로 작동하는 백엔드의 경우 사용에 의미가 없음

> [!NOTE] 서로 다른 조건 3가지
> * Protocol 인 HTTP 또는 HTTPS 가 다른 경우
> * domain 이름이 다를 경우
> * port 번호가 다를 경우

브라우저들은 대부분 pre-flight(교차출처소통?) 요청을 하기 때문에 백엔드에서만 해줘도 문제 없음

![[config/AttachedFile/Pasted image 20240328151205.png]]
최신 브라우저들에서는 기본적으로 가지고 있는 CORS 기능으로 인한 에러 발생

## 해결 방법 1
 [[2.Ref(데이터 및 정보 저장)/Spring/Annotation/@CrossOrigin|@CrossOrigin]] 사용하는 방법
 어디와 소통하는데 허용하겠다는 의미
## 해결 방법 2
[[#CorsConfiguration]]  설정을 작성하는 방법
필수 설정
- 허용 Method 설정
- 허용 Origin 설정
- 허용 Headers 설정
3가지 중 하나라도 없을 경우 CORS 해지되지 않음
# CorsConfiguration

```java
public class CorsConfiguration {
	// 교차 출처 요청이 허용되는 출처 목록 List.of("http://localhost:3000") 이렇게 넣기도 하지만 "${origin}" 이렇게 넣는게 더 쓰기 좋음
	public void setAllowedOrigins(@Nullable List<String> origins)
	// 해당 방법은 setAllowedOrigins 처럼 ${origin} 방법을 사용하지 못하고 문자열 그대로 저장
	public void addAllowedMethod(String method)
	// 인증정보를 넘기고 받는데 동의할지 말지 선택 (이거 굳이 필요하나?)
	// 내 서버가 응답할 때 json을 자바스크립트에서 처리할 수 있게 할지를 설정하는 것 (json 오는 데이터를 처리할지 선택)
	public void setAllowCredentials(@Nullable Boolean allowCredentials)
}
```

## 사용 예제
```java
  public CorsConfiguration corsConfiguration() {  
    CorsConfiguration corsConfig = new CorsConfiguration();  
//    corsConfig.addAllowedOrigin("http://localhost:3000");  
    corsConfig.setAllowedOrigins(List.of("http://localhost:3000"));  
    corsConfig.addAllowedMethod("*");  
    corsConfig.addAllowedHeader("*");  
    corsConfig.setMaxAge(3600L);  
    return corsConfig;  
  }
```

```java
@Configuration  
public class CorsConfig {  
    XsConfig xsConfig;  
  
    @Autowired  
    public CorsConfig(  
            XsConfig xsConfig  
    ){  
        this.xsConfig = xsConfig;  
    }  
    @Bean  
    public CorsFilter corsFilter(){  
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();  
        CorsConfiguration configuration = new CorsConfiguration();  
//        configuration.addAllowedOrigin("*"); //모든 ip에 응답을 허용(이제 막힘)
        configuration.addAllowedOrigin(xsConfig.getConsoleFrontUrl());  
        configuration.setAllowCredentials(true); // 내 서버가 응답할 때 json을 자바스크립트에서 처리할 수 있게 할지를 설정하는 것 (json 오는 데이터를 처리할지 선택)  
        configuration.addAllowedHeader("*"); //모든 header 응답을 허용  
//        configuration.addAllowedMethod("*"); //모든 post, get, put, delete, patch 허용  
        configuration.addAllowedMethod(HttpMethod.GET);  
        configuration.addAllowedMethod(HttpMethod.POST);  
        configuration.addExposedHeader("Authorization");  
        source.registerCorsConfiguration("/**", configuration); //해당 패턴으로 오는 모든 내용은 해당 configuration을 적용  
        return new CorsFilter(source);  
    }  
}
```5:["$","div",null,{"className":"page_container__MI3fw","children":["$","$L13",null,{"post":{"slug":"Spring/Security/CORS","slugHash":"7b9f05d0","content":"$14","markdownContent":"$15","title":"CORS","createdAt":"2025-09-12","updatedAt":"2025-09-12","tags":["Spring","Spring/Security"],"isPublished":false,"excerpt":"$undefined","coverImgUrl":"$undefined","aliases":["CORS","CorsConfiguration"],"noteUUID":"$undefined"}}]}]
e:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
9:null
12:{"metadata":[["$","title","0",{"children":"서동민 개발 블로그"}],["$","meta","1",{"name":"description","content":"서동민 개발 블로그"}],["$","meta","2",{"property":"og:title","content":"서동민 개발 블로그"}],["$","meta","3",{"property":"og:description","content":"서동민 개발 블로그"}],["$","meta","4",{"name":"twitter:card","content":"summary"}],["$","meta","5",{"name":"twitter:title","content":"서동민 개발 블로그"}],["$","meta","6",{"name":"twitter:description","content":"서동민 개발 블로그"}],["$","link","7",{"rel":"icon","href":"/github-blog/favicon.ico","type":"image/x-icon","sizes":"16x16"}]],"error":null,"digest":"$undefined"}
c:{"metadata":"$12:metadata","error":null,"digest":"$undefined"}
