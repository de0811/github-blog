1:"$Sreact.fragment"
2:I[4615,["874","static/chunks/874-ac0c32a4a9a6131e.js","177","static/chunks/app/layout-aa9facf8c991085d.js"],"default"]
3:I[7555,[],""]
4:I[1295,[],""]
6:I[9665,[],"MetadataBoundary"]
8:I[9665,[],"OutletBoundary"]
b:I[4911,[],"AsyncMetadataOutlet"]
d:I[9665,[],"ViewportBoundary"]
f:I[6614,[],""]
:HL["/github-blog/_next/static/css/f13864532fe49912.css","style"]
:HL["/github-blog/_next/static/css/9977e1cbb75c82aa.css","style"]
0:{"P":null,"b":"PsahSZRVuFaRsqDSv3j8u","p":"/github-blog","c":["","blog","43ce586b",""],"i":false,"f":[[["",{"children":["blog",{"children":[["slugHash","43ce586b","d"],{"children":["__PAGE__",{}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/github-blog/_next/static/css/f13864532fe49912.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"kr","children":["$","body",null,{"children":[["$","$L2",null,{}],["$","main",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]]}]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slugHash","43ce586b","d"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L5",["$","$L6",null,{"children":"$L7"}],[["$","link","0",{"rel":"stylesheet","href":"/github-blog/_next/static/css/9977e1cbb75c82aa.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L8",null,{"children":["$L9","$La",["$","$Lb",null,{"promise":"$@c"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","q468yANeos6HZwgAyHEh1",{"children":[["$","$Ld",null,{"children":"$Le"}],null]}],null]}],false]],"m":"$undefined","G":["$f","$undefined"],"s":false,"S":true}
10:"$Sreact.suspense"
11:I[4911,[],"AsyncMetadata"]
7:["$","$10",null,{"fallback":null,"children":["$","$L11",null,{"promise":"$@12"}]}]
a:null
e:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1"}]]
9:null
13:I[733,["63","static/chunks/63-df0ec183627b3631.js","727","static/chunks/727-6368b5a9647a1769.js","401","static/chunks/app/blog/%5BslugHash%5D/page-ae6b75d4d7185f4d.js"],"default"]
14:T86f2,<h1 style="color: #82AAFF;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h1</span>
                  MyBatis
                </h1>
<p><a href="https://mybatis.org/mybatis-3/ko/index.html">공식 문서</a></p>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              
              <span class="custom-code-block-lang-text">properties</span>
            </div>
            <span class="custom-code-block-title">MyBatis 설정</span>
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-properties hljs"><span class="line"><span class="hljs-comment"># 패키지 명을 작성해주면 `resultType` 따로 패키지명을 작성할 필요 없음</span></span><span class="line"><span class="hljs-attr">mybatis.type-aliases-package</span>=<span class="hljs-string">hello.itemservice.domain</span></span><span class="line"><span class="hljs-comment"># [[0.New Note/snake_case|snake_case]] 를 [[0.New Note/camelCase|camelCase]] 로 자동 변환</span></span><span class="line"><span class="hljs-attr">mybatis.configuration.map-underscore-to-camel-case</span>=<span class="hljs-string">true</span></span></code></pre>
        </div>
      
<p><a href="/github-blog/blog/2c4a1495">@Select</a> <a href="/github-blog/blog/50c4a425">@Update</a>, <a href="/github-blog/blog/960e5e50">@Delete</a>, <a href="/github-blog/blog/db72bd6f">@Insert</a> <a href="/github-blog/blog/941c4e95">어노테이션</a> 을 이용해서 <code>interface</code> 에서 바로 정의 할 수 있지만 XML 로 작성을 게속 하는 것을 추천</p>
<h2 style="color: #C3E88D;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h2</span>
                  장점
                </h2>
<ul>
<li>SQL XML로 작성</li>
<li>동적 쿼리 작성이 편리</li>
</ul>
<h2 style="color: #C3E88D;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h2</span>
                  단점
                </h2>
<ul>
<li>설정 필요</li>
<li>컬럼이나 테이블 명이 바뀌면 모두 찾아서 바꿔야하는데 버그 발생 확률 필연</li>
<li>관계형 데이터 베이스와 객체지향은 아주 다른 개념</li>
<li>SQL 너무 어려움 (난 하기 싫다 증말)</li>
</ul>
<h2 style="color: #C3E88D;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h2</span>
                  사용방법
                </h2>
<ol>
<li>인터페이스 만들기</li>
<li>XML 작성하기</li>
</ol>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><title>Java</title><path d="M 28.1875 0 C 30.9375 6.363281 18.328125 10.292969 17.15625 15.59375 C 16.082031 20.464844 24.648438 26.125 24.65625 26.125 C 23.355469 24.109375 22.398438 22.449219 21.09375 19.3125 C 18.886719 14.007813 34.535156 9.207031 28.1875 0 Z M 36.5625 8.8125 C 36.5625 8.8125 25.5 9.523438 24.9375 16.59375 C 24.6875 19.742188 27.847656 21.398438 27.9375 23.6875 C 28.011719 25.558594 26.0625 27.125 26.0625 27.125 C 26.0625 27.125 29.609375 26.449219 30.71875 23.59375 C 31.949219 20.425781 28.320313 18.285156 28.6875 15.75 C 29.039063 13.324219 36.5625 8.8125 36.5625 8.8125 Z M 19.1875 25.15625 C 19.1875 25.15625 9.0625 25.011719 9.0625 27.875 C 9.0625 30.867188 22.316406 31.089844 31.78125 29.25 C 31.78125 29.25 34.296875 27.519531 34.96875 26.875 C 28.765625 28.140625 14.625 28.28125 14.625 27.1875 C 14.625 26.179688 19.1875 25.15625 19.1875 25.15625 Z M 38.65625 25.15625 C 37.664063 25.234375 36.59375 25.617188 35.625 26.3125 C 37.90625 25.820313 39.84375 27.234375 39.84375 28.84375 C 39.84375 32.46875 34.59375 35.875 34.59375 35.875 C 34.59375 35.875 42.71875 34.953125 42.71875 29 C 42.71875 26.296875 40.839844 24.984375 38.65625 25.15625 Z M 16.75 30.71875 C 15.195313 30.71875 12.875 31.9375 12.875 33.09375 C 12.875 35.417969 24.5625 37.207031 33.21875 33.8125 L 30.21875 31.96875 C 24.351563 33.847656 13.546875 33.234375 16.75 30.71875 Z M 18.1875 35.9375 C 16.058594 35.9375 14.65625 37.222656 14.65625 38.1875 C 14.65625 41.171875 27.371094 41.472656 32.40625 38.4375 L 29.21875 36.40625 C 25.457031 37.996094 16.015625 38.238281 18.1875 35.9375 Z M 11.09375 38.625 C 7.625 38.554688 5.375 40.113281 5.375 41.40625 C 5.375 48.28125 40.875 47.964844 40.875 40.9375 C 40.875 39.769531 39.527344 39.203125 39.03125 38.9375 C 41.933594 45.65625 9.96875 45.121094 9.96875 41.15625 C 9.96875 40.253906 12.320313 39.390625 14.5 39.8125 L 12.65625 38.75 C 12.113281 38.667969 11.589844 38.636719 11.09375 38.625 Z M 44.625 43.25 C 39.226563 48.367188 25.546875 50.222656 11.78125 47.0625 C 25.542969 52.695313 44.558594 49.535156 44.625 43.25 Z"/></svg></span>
              <span class="custom-code-block-lang-text">java</span>
            </div>
            <span class="custom-code-block-title">ItemMapper.java 인터페이스 작성</span>
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-java hljs"><span class="line highlighted-line"><span class="hljs-meta">@Mapper</span>  </span><span class="line"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemMapper</span> {  </span><span class="line">  <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(Item item)</span>;  </span><span class="line">  </span><span class="line">  <span class="hljs-comment">// @Param 붙여주면 파라미터명을 다르게 지정할 수 있음 파라메타가 2개 이상이라면 필수로 작성  </span></span><span class="line">  <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> Long id, <span class="hljs-meta">@Param(&quot;updateParam&quot;)</span>ItemUpdateDto itemUpdateDto)</span>;  </span><span class="line">  </span><span class="line">  <span class="hljs-comment">// @Param 안붙여주면 오브젝트의 필드명이 파라미터명 사용  </span></span><span class="line">  List&lt;Item&gt; <span class="hljs-title function_">findAll</span><span class="hljs-params">(ItemSearchCond itemSearchCond)</span>;  </span><span class="line">  </span><span class="line">  Optional&lt;Item&gt; <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span>;  </span><span class="line">}</span></code></pre>
        </div>
      
<ol>
<li><a href="#">@Mapper</a> : 작성함으로 MyBatis 인터페이스 등록<br> 인터페이스가 이렇게 구성된 경우<br><br><span class="custom-inline-code"><code class="hljs java"><span class="hljs-keyword">package</span> hello.itemservice.repository.mybatis;</code></span> 인터페이스가 이렇게 구성된 경우
<code>resources/hello/itemservice/repository/mybatis</code> 경로에 <code>ItemMapper.xml</code> 을 작성</li>
</ol>

<div class="callout" style="--callout-color: 41, 128, 185;">
  <div class="callout-title">
    <div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-4V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" /></svg></div>
    <div class="callout-title-text">XML 파일 경로 수정하기</div>
  </div>
  <div class="callout-content">
    <p>XML 파일의 위치를 변경하고 싶다면 <code>application.properties</code> 에 <code>mybatis.mapper-locations=classpath:mapper/**/*.xml</code> 이런 형식으로 변경하면 설정 완료
테스트에도 적용하길 원한다면 테스트의 <code>application.properties</code> 에도 수정 하면 설정</p>

  </div>
</div>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>XML</title><path d="M13.4 3l-2.8 18 2.8 0 2.8-18h-2.8zM6.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0zM21.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0z"/></svg></span>
              <span class="custom-code-block-lang-text">xml</span>
            </div>
            <span class="custom-code-block-title">ItemMapper.xml</span>
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-xml hljs"><span class="line"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span></span><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;hello.itemservice.repository.mybatis.ItemMapper&quot;</span>&gt;</span></span><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;save&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;hello.itemservice.domain.Item&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span></span><span class="line">        INSERT INTO</span><span class="line">            item</span><span class="line">        (</span><span class="line">            item_name,</span><span class="line">            price,</span><span class="line">            quantity</span><span class="line">        )</span><span class="line">        VALUES</span><span class="line">        (</span><span class="line">            #{itemName},</span><span class="line">            #{price},</span><span class="line">            #{quantity}</span><span class="line">        )</span><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></span><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;update&quot;</span>&gt;</span></span><span class="line">        UPDATE</span><span class="line">            item</span><span class="line">        SET</span><span class="line">            item_name = #{updateParam.itemName},</span><span class="line">            price = #{updateParam.price},</span><span class="line">            quantity = #{updateParam.quantity}</span><span class="line">        WHERE</span><span class="line">            id = #{id}</span><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></span><span class="line">&nbsp;</span><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findById&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;hello.itemservice.domain.Item&quot;</span>&gt;</span></span><span class="line">        SELECT</span><span class="line">            id,</span><span class="line">            item_name,</span><span class="line">            price,</span><span class="line">            quantity</span><span class="line">        FROM</span><span class="line">            item</span><span class="line">        WHERE</span><span class="line">            id = #{id}</span><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;findAll&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;hello.itemservice.repository.ItemSearchCond&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;Item&quot;</span>&gt;</span></span><span class="line">        SELECT</span><span class="line">            id,</span><span class="line">            item_name,</span><span class="line">            price,</span><span class="line">            quantity</span><span class="line">        FROM</span><span class="line">            item</span><span class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></span><span class="line">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;itemName != null and itemName != &#x27;&#x27;&quot;</span>&gt;</span></span><span class="line">                AND item_name like concat(&#x27;%&#x27;, #{itemName}, &#x27;%&#x27;)</span><span class="line">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><span class="line">            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;maxPrice != null&quot;</span>&gt;</span></span><span class="line">                AND price <span class="hljs-symbol">&amp;lt;</span>= #{maxPrice}</span><span class="line">            <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></span><span class="line">        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delete&quot;</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">&quot;java.lang.String&quot;</span>&gt;</span></span><span class="line">        DELETE FROM</span><span class="line">            item</span><span class="line">        WHERE</span><span class="line">            id = #{id}</span><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span></span><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span></span></code></pre>
        </div>
      

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>XML</title><path d="M13.4 3l-2.8 18 2.8 0 2.8-18h-2.8zM6.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0zM21.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0z"/></svg></span>
              <span class="custom-code-block-lang-text">XML</span>
            </div>
            <span class="custom-code-block-title">첫번째 조건문으로 들어올 경우 MyBatis 자동으로 and 삭제</span>
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-XML hljs"><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span>  </span><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;itemName != null and itemName != &#x27;&#x27;&quot;</span>&gt;</span>  </span><span class="line highlighted-line">        AND item_name like concat(&#x27;%&#x27;, #{itemName}, &#x27;%&#x27;)  </span><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>  </span><span class="line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;maxPrice != null&quot;</span>&gt;</span>  </span><span class="line highlighted-line">        AND price <span class="hljs-symbol">&amp;lt;</span>= #{maxPrice}  </span><span class="line">    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>  </span><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></span></code></pre>
        </div>
      

<div class="callout" style="--callout-color: 0, 116, 217;">
  <div class="callout-title">
    <div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /></svg></div>
    <div class="callout-title-text">XML 작성시 특수문자 전환 필요</div>
  </div>
  <div class="callout-content">
    <p>XML 특성상 &#x3C;> 문자와 &#x26; 문자를 사용할 수 없기 때문에 특수한 방법으로 사용</p>
<ul>
<li>특수 키워드 사용 방법
<code>&#x3C;</code> : <code>&#x26;lt;</code>
<code>></code> : <code>&#x26;gt;</code>
<code>&#x26;</code> : <code>&#x26;amp;</code></li>
<li>CDATA 사용 방법
시작을 <code>&#x3C;![CDATA[</code>  끝을 <code>]]></code> 처리 가능
ex) <code>&#x3C;![CDATA[ and price &#x3C;= #{maxPrice} ]]></code>
단점으로 내부에서 <code>&#x3C;if></code> 와 <code>&#x3C;where></code> 처리가 되지 않음</li>
</ul>

  </div>
</div>
<h3 style="color: #C792EA;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h3</span>
                  동적 쿼리
                </h3>
<ul>
<li><code>&#x3C;if></code> : 해당 조건을 만족하면 작성</li>
<li><code>choose (when, otherwise)</code> : switch 구문과 유사, when 구문이 모두 조건이 맞지 않으면 otherwise 사용</li>
<li><code>trim (where, set)</code> : WHERE 없을 경우엔 삭제해주고 있을 경우 추가해주는 방식
<ul>
<li><code>&#x3C;trim prefix="WHERE" prefixOverrides="AND |OR"></code> 방식 == <code>&#x3C;where>&#x3C;if test="state != null">AND state == ${state} &#x3C;/where></code></li>
</ul>
</li>
<li><code>foreach</code> : 컬랙션을 반복 처리할 때 사용 - 파라메터로 List 를 넣는 방법이 더 나을지도 모름<br>상세 설명은 <a href="https://mybatis.org/mybatis-3/ko/dynamic-sql.html">공식 페이지-동적 SQL</a>  부분에 모두 설명</li>
</ul>
<h3 style="color: #C792EA;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h3</span>
                  문자열 대체
                </h3>
<p><code>#{}</code> 문법은 ? 넣고 파라미터를 바인딩하는 <code>PreparedStatement</code> 를 사용<br> 사용<br> 문법은 SQL Injection 공격을 당할 위험이 있기 때문에 사용하지 않는 것을 추천<br><code>${}</code> 사용
그렇지만 <code>${}</code> 문법은 SQL Injection 공격을 당할 위험이 있기 때문에 사용하지 않는 것을 추천
<code>select * from user where + ${column} + = #{value}</code> 이런 느낌이 아닐까 싶음</p>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><title>Java</title><path d="M 28.1875 0 C 30.9375 6.363281 18.328125 10.292969 17.15625 15.59375 C 16.082031 20.464844 24.648438 26.125 24.65625 26.125 C 23.355469 24.109375 22.398438 22.449219 21.09375 19.3125 C 18.886719 14.007813 34.535156 9.207031 28.1875 0 Z M 36.5625 8.8125 C 36.5625 8.8125 25.5 9.523438 24.9375 16.59375 C 24.6875 19.742188 27.847656 21.398438 27.9375 23.6875 C 28.011719 25.558594 26.0625 27.125 26.0625 27.125 C 26.0625 27.125 29.609375 26.449219 30.71875 23.59375 C 31.949219 20.425781 28.320313 18.285156 28.6875 15.75 C 29.039063 13.324219 36.5625 8.8125 36.5625 8.8125 Z M 19.1875 25.15625 C 19.1875 25.15625 9.0625 25.011719 9.0625 27.875 C 9.0625 30.867188 22.316406 31.089844 31.78125 29.25 C 31.78125 29.25 34.296875 27.519531 34.96875 26.875 C 28.765625 28.140625 14.625 28.28125 14.625 27.1875 C 14.625 26.179688 19.1875 25.15625 19.1875 25.15625 Z M 38.65625 25.15625 C 37.664063 25.234375 36.59375 25.617188 35.625 26.3125 C 37.90625 25.820313 39.84375 27.234375 39.84375 28.84375 C 39.84375 32.46875 34.59375 35.875 34.59375 35.875 C 34.59375 35.875 42.71875 34.953125 42.71875 29 C 42.71875 26.296875 40.839844 24.984375 38.65625 25.15625 Z M 16.75 30.71875 C 15.195313 30.71875 12.875 31.9375 12.875 33.09375 C 12.875 35.417969 24.5625 37.207031 33.21875 33.8125 L 30.21875 31.96875 C 24.351563 33.847656 13.546875 33.234375 16.75 30.71875 Z M 18.1875 35.9375 C 16.058594 35.9375 14.65625 37.222656 14.65625 38.1875 C 14.65625 41.171875 27.371094 41.472656 32.40625 38.4375 L 29.21875 36.40625 C 25.457031 37.996094 16.015625 38.238281 18.1875 35.9375 Z M 11.09375 38.625 C 7.625 38.554688 5.375 40.113281 5.375 41.40625 C 5.375 48.28125 40.875 47.964844 40.875 40.9375 C 40.875 39.769531 39.527344 39.203125 39.03125 38.9375 C 41.933594 45.65625 9.96875 45.121094 9.96875 41.15625 C 9.96875 40.253906 12.320313 39.390625 14.5 39.8125 L 12.65625 38.75 C 12.113281 38.667969 11.589844 38.636719 11.09375 38.625 Z M 44.625 43.25 C 39.226563 48.367188 25.546875 50.222656 11.78125 47.0625 C 25.542969 52.695313 44.558594 49.535156 44.625 43.25 Z"/></svg></span>
              <span class="custom-code-block-lang-text">java</span>
            </div>
            
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-java hljs"><span class="line"><span class="hljs-meta">@Select(&quot;select * from user where ${column} = #{value})</span></span><span class="line">User <span class="hljs-title function_">findByColumn</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;column&quot;)</span> String column, <span class="hljs-meta">@Param(&quot;value&quot;)</span> String value)</span>;</span></code></pre>
        </div>
      
<h3 style="color: #C792EA;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h3</span>
                  재사용 가능한 SQL 조각
                </h3>
<p><code>&#x3C;sql></code> 사용하면 코드 조각으로 재사용 가능</p>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>XML</title><path d="M13.4 3l-2.8 18 2.8 0 2.8-18h-2.8zM6.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0zM21.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0z"/></svg></span>
              <span class="custom-code-block-lang-text">xml</span>
            </div>
            <span class="custom-code-block-title">코드 조각 생성</span>
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-xml hljs"><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userColumns&quot;</span>&gt;</span> ${alias}.id, ${alias}.username, ${alias}.password <span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span></span></code></pre>
        </div>
      

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>XML</title><path d="M13.4 3l-2.8 18 2.8 0 2.8-18h-2.8zM6.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0zM21.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0z"/></svg></span>
              <span class="custom-code-block-lang-text">xml</span>
            </div>
            <span class="custom-code-block-title">재활용 코드 사용 방법</span>
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-xml hljs"><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUsers&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;map&quot;</span>&gt;</span></span><span class="line">	select</span><span class="line">		<span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;userColumns&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;alias&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;t1&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>,</span><span class="line">		<span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">&quot;userColumns&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;alias&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;t2&quot;</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>,</span><span class="line">	from some_table t1</span><span class="line">	cross join some_table t2</span><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span></code></pre>
        </div>
      
<h3 style="color: #C792EA;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h3</span>
                  반환되는 타입을 정의 하는 방법
                </h3>
<p>결과 매핑할때 테이블의 컬럼 이름이 <code>user_id</code> 이지만 객체는 <code>id</code> 일 경우 보통 <code>as</code> 를 이용하여 별칭으로 해결하는 방법이 있지만 많은 경우에는 <code>resultMap</code> 을 사용하는 방법</p>

        <div class="custom-code-block">
          
        <div class="custom-code-block-header">
          <div class="custom-code-block-header-left">
            <div class="custom-code-block-lang">
              <span class="custom-code-block-icon"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>XML</title><path d="M13.4 3l-2.8 18 2.8 0 2.8-18h-2.8zM6.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0zM21.4 6l-3.8 6 3.8 6 2.2 0-3.8-6 3.8-6-2.2 0z"/></svg></span>
              <span class="custom-code-block-lang-text">xml</span>
            </div>
            
          </div>
          <div class="custom-code-block-header-right">
            <div class="custom-code-block-actions">
              <button class="copy-code-button" title="Copy code">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
              </button>
            </div>
          </div>
        </div>
      
          <pre><code class="language-xml hljs"><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;userResultMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;User&quot;</span>&gt;</span></span><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;user_id&quot;</span> /&gt;</span></span><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;user_name&quot;</span>/&gt;</span></span><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;hashed_password&quot;</span>/&gt;</span></span><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span></span><span class="line">&nbsp;</span><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;selectUsers&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;userResultMap&quot;</span>&gt;</span></span><span class="line">	select user_id, user_name, hashed_password</span><span class="line">	from some_table</span><span class="line">	where id = #{id}</span><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span></code></pre>
        </div>
      
<h3 style="color: #C792EA;">
                  <span style="font-size: initial; color: #F0C292; margin-right: 0.5em;">h3</span>
                  복잡한 결과 매핑 방법
                </h3>
<p><code>&#x3C;association></code> , <code>&#x3C;collection></code> 사용하여 해결할 수 있음<br>하지만 성능과 실효성 측면으로 많은 고민이 필요</p>
15:T1e11,---
aliases:
  - MyBatis
tags:
  - Spring
  - Spring/MyBatis
  - spring/Repository
특징: 
---
# MyBatis
[공식 문서](https://mybatis.org/mybatis-3/ko/index.html)
```properties title:"MyBatis 설정"
# 패키지 명을 작성해주면 `resultType` 따로 패키지명을 작성할 필요 없음
mybatis.type-aliases-package=hello.itemservice.domain
# [[0.New Note/snake_case|snake_case]] 를 [[0.New Note/camelCase|camelCase]] 로 자동 변환
mybatis.configuration.map-underscore-to-camel-case=true
```

[[2.Ref(데이터 및 정보 저장)/Spring/Annotation/@Select|@Select]] [[2.Ref(데이터 및 정보 저장)/Spring/Annotation/@Update|@Update]], [[2.Ref(데이터 및 정보 저장)/Spring/Annotation/@Delete|@Delete]], [[2.Ref(데이터 및 정보 저장)/Spring/Annotation/@Insert|@Insert]] [[2.Ref(데이터 및 정보 저장)/Spring/Annotation/1.애노테이션(annotation)|어노테이션]] 을 이용해서 `interface` 에서 바로 정의 할 수 있지만 XML 로 작성을 게속 하는 것을 추천
## 장점
- SQL XML로 작성
- 동적 쿼리 작성이 편리
## 단점
- 설정 필요
- 컬럼이나 테이블 명이 바뀌면 모두 찾아서 바꿔야하는데 버그 발생 확률 필연
- 관계형 데이터 베이스와 객체지향은 아주 다른 개념
- SQL 너무 어려움 (난 하기 싫다 증말)
## 사용방법
1. 인터페이스 만들기
2. XML 작성하기
```java title:"ItemMapper.java 인터페이스 작성" hl:1
@Mapper  
public interface ItemMapper {  
  void save(Item item);  
  
  // @Param 붙여주면 파라미터명을 다르게 지정할 수 있음 파라메타가 2개 이상이라면 필수로 작성  
  void update(@Param("id") Long id, @Param("updateParam")ItemUpdateDto itemUpdateDto);  
  
  // @Param 안붙여주면 오브젝트의 필드명이 파라미터명 사용  
  List<Item> findAll(ItemSearchCond itemSearchCond);  
  
  Optional<Item> findById(Long id);  
}
```
1. [[@Mapper]] : 작성함으로 MyBatis 인터페이스 등록
기본은 인터페이스의 패키지 위치와 동일하게 맞춰줘야함
`{java}package hello.itemservice.repository.mybatis;` 인터페이스가 이렇게 구성된 경우
`resources/hello/itemservice/repository/mybatis` 경로에 `ItemMapper.xml` 을 작성
> [!note] XML 파일 경로 수정하기
> XML 파일의 위치를 변경하고 싶다면 `application.properties` 에 `mybatis.mapper-locations=classpath:mapper/**/*.xml` 이런 형식으로 변경하면 설정 완료
> 테스트에도 적용하길 원한다면 테스트의 `application.properties` 에도 수정 하면 설정
```xml title:"ItemMapper.xml"
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="hello.itemservice.repository.mybatis.ItemMapper">
    <insert id="save" parameterType="hello.itemservice.domain.Item" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO
            item
        (
            item_name,
            price,
            quantity
        )
        VALUES
        (
            #{itemName},
            #{price},
            #{quantity}
        )
    </insert>
    <update id="update">
        UPDATE
            item
        SET
            item_name = #{updateParam.itemName},
            price = #{updateParam.price},
            quantity = #{updateParam.quantity}
        WHERE
            id = #{id}
    </update>

    <select id="findById" resultType="hello.itemservice.domain.Item">
        SELECT
            id,
            item_name,
            price,
            quantity
        FROM
            item
        WHERE
            id = #{id}
    </select>
    <select id="findAll" parameterType="hello.itemservice.repository.ItemSearchCond" resultType="Item">
        SELECT
            id,
            item_name,
            price,
            quantity
        FROM
            item
        <where>
            <if test="itemName != null and itemName != ''">
                AND item_name like concat('%', #{itemName}, '%')
            </if>
            <if test="maxPrice != null">
                AND price &lt;= #{maxPrice}
            </if>
        </where>
    </select>
    <delete id="delete" parameterType="java.lang.String">
        DELETE FROM
            item
        WHERE
            id = #{id}
    </delete>
</mapper>
```

```XML title:"첫번째 조건문으로 들어올 경우 MyBatis 자동으로 and 삭제" hl:3,6
<where>  
    <if test="itemName != null and itemName != ''">  
        AND item_name like concat('%', #{itemName}, '%')  
    </if>  
    <if test="maxPrice != null">  
        AND price &lt;= #{maxPrice}  
    </if>  
</where>
```

> [!info] XML 작성시 특수문자 전환 필요
> XML 특성상 <> 문자와 & 문자를 사용할 수 없기 때문에 특수한 방법으로 사용
> - 특수 키워드 사용 방법
> `<` : `&lt;`
> `>` : `&gt;`
> `&` : `&amp;`
> - CDATA 사용 방법
> 시작을 `<![CDATA[`  끝을 `]]>` 처리 가능
> ex) `<![CDATA[ and price <= #{maxPrice} ]]>`
> 단점으로 내부에서 `<if>` 와 `<where>` 처리가 되지 않음

### 동적 쿼리
- `<if>` : 해당 조건을 만족하면 작성
- `choose (when, otherwise)` : switch 구문과 유사, when 구문이 모두 조건이 맞지 않으면 otherwise 사용
- `trim (where, set)` : WHERE 없을 경우엔 삭제해주고 있을 경우 추가해주는 방식
	- `<trim prefix="WHERE" prefixOverrides="AND |OR">` 방식 == `<where><if test="state != null">AND state == ${state} </where>`
- `foreach` : 컬랙션을 반복 처리할 때 사용 - 파라메터로 List 를 넣는 방법이 더 나을지도 모름
상세 설명은 [공식 페이지-동적 SQL](https://mybatis.org/mybatis-3/ko/dynamic-sql.html)  부분에 모두 설명

### 문자열 대체
`#{}` 문법은 ? 넣고 파라미터를 바인딩하는 `PreparedStatement` 를 사용
때로는 파라미터 바인딩이 아닌 문자 그대로를 처리하고 싶을땐 `${}` 사용
그렇지만 `${}` 문법은 SQL Injection 공격을 당할 위험이 있기 때문에 사용하지 않는 것을 추천
`select * from user where + ${column} + = #{value}` 이런 느낌이 아닐까 싶음
```java
@Select("select * from user where ${column} = #{value})
User findByColumn(@Param("column") String column, @Param("value") String value);
```
### 재사용 가능한 SQL 조각
`<sql>` 사용하면 코드 조각으로 재사용 가능
```xml title:"코드 조각 생성"
<sql id="userColumns"> ${alias}.id, ${alias}.username, ${alias}.password </sql>
```

```xml title:"재활용 코드 사용 방법"
<select id="selectUsers" resultType="map">
	select
		<include refid="userColumns"><property name="alias" value="t1"/></include>,
		<include refid="userColumns"><property name="alias" value="t2"/></include>,
	from some_table t1
	cross join some_table t2
</select>
```

### 반환되는 타입을 정의 하는 방법
결과 매핑할때 테이블의 컬럼 이름이 `user_id` 이지만 객체는 `id` 일 경우 보통 `as` 를 이용하여 별칭으로 해결하는 방법이 있지만 많은 경우에는 `resultMap` 을 사용하는 방법
```xml
<resultMap id="userResultMap" type="User">
	<id property="id" column="user_id" />
	<result property="username" column="user_name"/>
	<result property="password" column="hashed_password"/>
</resultMap>

<select id="selectUsers" resultMap="userResultMap">
	select user_id, user_name, hashed_password
	from some_table
	where id = #{id}
</select>
```
### 복잡한 결과 매핑 방법
`<association>` , `<collection>` 사용하여 해결할 수 있음
하지만 성능과 실효성 측면으로 많은 고민이 필요
5:["$","div",null,{"className":"page_container__MI3fw","children":["$","$L13",null,{"post":{"slug":"Spring/Repository/MyBatis","slugHash":"43ce586b","content":"$14","markdownContent":"$15","title":"MyBatis","createdAt":"2025-09-11","updatedAt":"2025-09-11","tags":["Spring","Spring/MyBatis","spring/Repository"],"isPublished":true,"excerpt":"$undefined","coverImgUrl":"$undefined","aliases":["MyBatis"],"noteUUID":"$undefined"}}]}]
12:{"metadata":[["$","title","0",{"children":"서동민 개발 블로그"}],["$","meta","1",{"name":"description","content":"서동민 개발 블로그"}],["$","meta","2",{"property":"og:title","content":"서동민 개발 블로그"}],["$","meta","3",{"property":"og:description","content":"서동민 개발 블로그"}],["$","meta","4",{"name":"twitter:card","content":"summary"}],["$","meta","5",{"name":"twitter:title","content":"서동민 개발 블로그"}],["$","meta","6",{"name":"twitter:description","content":"서동민 개발 블로그"}],["$","link","7",{"rel":"icon","href":"/github-blog/favicon.ico","type":"image/x-icon","sizes":"16x16"}]],"error":null,"digest":"$undefined"}
c:{"metadata":"$12:metadata","error":null,"digest":"$undefined"}
